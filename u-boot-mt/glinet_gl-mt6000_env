ipaddr=192.168.1.1
serverip=192.168.1.254
loadaddr=0x46000000
bootdelay=3
bootfile_bl2=openwrt-mediatek-filogic-glinet_gl-mt6000-preloader.bin
bootfile_fip=openwrt-mediatek-filogic-glinet_gl-mt6000-bl31-uboot.fip
bootfile_firmware=openwrt-mediatek-filogic-glinet_gl-mt6000-squashfs-factory.bin
bootmenu_confirm_return=askenv - Press ENTER to return to menu ; bootmenu 60
bootmenu_title=      *** U-Boot Boot Menu for GL-iNet GL-MT6000 ***
bootmenu_0=Startup system (Default).=run boot_system
bootmenu_1=Load Firmware via TFTP then write to eMMC.=run boot_tftp_firmware ; run bootmenu_confirm_return
bootmenu_2=Load BL31+U-Boot FIP via TFTP then write to eMMC.=run boot_tftp_write_fip ; run bootmenu_confirm_return
bootmenu_3=Load BL2 preloader via TFTP then write to eMMC.=run boot_tftp_write_bl2 ; run bootmenu_confirm_return
bootmenu_4=Reboot.=reset
bootmenu_5=Reset all settings to factory defaults.=run reset_factory ; reset
filesize_to_blk=setexpr cnt $filesize + 0x1ff && setexpr cnt $cnt / 0x200
mmc_read_kernel=mmc read $loadaddr $part_addr 0x100 && imszb $loadaddr image_size && test 0x$image_size -le 0x$part_size && mmc read $loadaddr $part_addr $image_size
boot_system=part start mmc 0 kernel part_addr && part size mmc 0 kernel part_size && run mmc_read_kernel && bootm
boot_tftp_firmware=tftpboot $loadaddr $bootfile_firmware && run emmc_write_firmware
boot_tftp_write_fip=tftpboot $loadaddr $bootfile_fip && run emmc_write_fip
boot_tftp_write_bl2=tftpboot $loadaddr $bootfile_bl2 && run emmc_write_bl2
emmc_write_firmware=part start mmc 0 kernel part_addr && run filesize_to_blk && mmc write $loadaddr $part_addr $cnt
emmc_write_bl2=run filesize_to_blk && test 0x$cnt -le 0x800 && mmc partconf 0 1 1 1 &&  && mmc write $loadaddr 0x0 0x800 ; mmc partconf 0 1 1 0
emmc_write_fip=part start mmc 0 fip part_addr && part size mmc 0 fip part_size && run filesize_to_blk && test 0x$cnt -le 0x$part_size && mmc write $loadaddr $part_addr $cnt
reset_factory=eraseenv && reset
